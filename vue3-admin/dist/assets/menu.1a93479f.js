import{d as v,a as B,r as h,a7 as V,a8 as q,a9 as M,aa as $,f as L,ac as N,o as p,b as S,m as g,e,w as o,B as T,k as f,n as z,G as i,t as F,l as c,a5 as U,a4 as A,A as I}from"./vendor.998f11a4.js";/* empty css                        *//* empty css                    *//* empty css                     */import{e as G,o as R,h as j}from"./base.c57cb09d.js";import{_ as H,c as J,g as K}from"./index.4250c31e.js";import O from"./menuDialog.8c8e8a1d.js";import"./index.817f7d32.js";/* empty css                  */const P=v({name:"Menu",components:{MenuDialog:O},setup(){const t=J();let a=B(),b=h({visible:!1,title:"",data:{type:0,icon:"",cache:!1,show:!0,title:"",action:"",url:"",sort:99,name:"",path:"",pid:0}}),m=h({data:[],load:!1,query:{limit:20,page:1,total:0,title:"",action:"",type:""}}),D=h([]);const _=async()=>{try{m.load=!0;let{code:s,result:u}=await K();u.sort((d,n)=>d.sort-n.sort);let r=u.filter(d=>d.pid===0);for(const d of r)t.deepMergeMenu(d,u);m.data=r,m.load=!1}catch{m.load=!1}};return _(),G.on("list-reload",s=>{s==="menu"&&_()}),{selectList:D,list:m,form:a,dialogData:b,getList:_,openDialog:R,handleDelete:j}}}),Q={class:"page-main"},W={class:"operate-box"},X={class:"operate-btns"},Y=i("\u65B0\u589E"),Z={class:"filter-box"},x=i("\u641C\u7D22"),ee=i("\u91CD\u7F6E"),te=i("\u76EE\u5F55"),le=i("\u83DC\u5355"),oe=i("\u5916\u94FE"),ae=i("\u89C4\u5219"),ne=i("\u7F16\u8F91"),ie=i("\u5220\u9664");function se(t,a,b,m,D,_){const s=U,u=A,r=V,d=q,n=M,y=I,E=$,k=L("menu-dialog"),w=N;return p(),S("div",Q,[g("div",W,[g("div",X,[e(s,{type:"primary",onClick:a[0]||(a[0]=l=>t.openDialog(t.dialogData,"\u65B0\u589E\u83DC\u5355"))},{default:o(()=>[Y]),_:1})]),e(s,{type:"primary",icon:"Refresh",onClick:a[1]||(a[1]=()=>{t.form.resetFields(),t.getList()})})]),g("div",Z,[e(d,{ref:"form",class:"filter-form",model:t.list.query,"label-width":"80px",inline:""},{default:o(()=>[e(r,{label:"\u540D\u79F0",prop:"title"},{default:o(()=>[e(u,{modelValue:t.list.query.title,"onUpdate:modelValue":a[2]||(a[2]=l=>t.list.query.title=l)},null,8,["modelValue"])]),_:1}),e(r,{label:"\u6743\u9650",prop:"level"},{default:o(()=>[e(u,{modelValue:t.list.query.action,"onUpdate:modelValue":a[3]||(a[3]=l=>t.list.query.action=l)},null,8,["modelValue"])]),_:1}),e(r,{label:"\u7C7B\u578B",prop:"type"},{default:o(()=>[e(u,{modelValue:t.list.query.type,"onUpdate:modelValue":a[4]||(a[4]=l=>t.list.query.type=l)},null,8,["modelValue"])]),_:1}),e(r,null,{default:o(()=>[e(s,{type:"primary",onClick:t.getList},{default:o(()=>[x]),_:1},8,["onClick"]),e(s,{type:"primary",onClick:a[5]||(a[5]=()=>{t.form.resetFields()})},{default:o(()=>[ee]),_:1})]),_:1})]),_:1},8,["model"])]),T((p(),f(E,{data:t.list.data,border:"",size:"small","row-key":"id","default-expand-all":!0,lazy:"",style:{width:"100%"},"tree-props":{children:"children",hasChildren:"hasChildren"},onSelectionChange:a[6]||(a[6]=l=>{t.selectList=l.map(C=>C.id)})},{default:o(()=>[e(n,{type:"selection"}),e(n,{prop:"title",label:"\u540D\u79F0",align:"center"}),e(n,{prop:"icon",label:"\u56FE\u6807",align:"center"},{default:o(l=>[g("i",{class:z("iconfont "+l.row.icon)},null,2)]),_:1}),e(n,{prop:"sort",label:"\u6392\u5E8F",align:"center",width:"60"}),e(n,{prop:"action",label:"\u6743\u9650\u89C4\u5219",align:"center"}),e(n,{prop:"path",label:"\u7EC4\u4EF6\u8DEF\u5F84",align:"center"}),e(n,{prop:"cache",label:"\u7F13\u5B58",align:"center"},{default:o(l=>[i(F(l.row.cache==!0?"\u662F":"\u5426"),1)]),_:1}),e(n,{prop:"hide",label:"\u83DC\u5355\u663E\u793A",align:"center"},{default:o(l=>[i(F(l.row.hide?"\u5426":"\u662F"),1)]),_:1}),e(n,{prop:"type",label:"\u7C7B\u578B",align:"center"},{default:o(l=>[l.row.type===0?(p(),f(y,{key:0,type:"success",effect:"plain"},{default:o(()=>[te]),_:1})):c("",!0),l.row.type===1?(p(),f(y,{key:1,effect:"plain"},{default:o(()=>[le]),_:1})):c("",!0),l.row.type===2?(p(),f(y,{key:2,effect:"plain"},{default:o(()=>[oe]),_:1})):c("",!0),l.row.type===3?(p(),f(y,{key:3,type:"info",effect:"plain"},{default:o(()=>[ae]),_:1})):c("",!0)]),_:1}),e(n,{fixed:"right",label:"\u64CD\u4F5C",align:"center"},{default:o(l=>[e(s,{onClick:C=>t.openDialog(t.dialogData,"\u7F16\u8F91\u83DC\u5355",l.row)},{default:o(()=>[ne]),_:2},1032,["onClick"]),e(s,{type:"danger",onClick:C=>t.handleDelete([l.row.id],"menu")},{default:o(()=>[ie]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[w,t.list.load]]),t.dialogData.visible?(p(),f(k,{key:0,"dialog-data":t.dialogData},null,8,["dialog-data"])):c("",!0)])}var ge=H(P,[["render",se]]);export{ge as default};
//# sourceMappingURL=menu.1a93479f.js.map
