{"version":3,"file":"manageDialog.49e924d4.js","sources":["../../node_modules/.pnpm/registry.npmmirror.com+mitt@3.0.0/node_modules/mitt/dist/mitt.mjs","../../src/utils/mitt.ts","../../src/api/base.ts","../../src/views/system/manage/components/manageDialog.vue"],"sourcesContent":["export default function(n){return{all:n=n||new Map,on:function(t,e){var i=n.get(t);i?i.push(e):n.set(t,[e])},off:function(t,e){var i=n.get(t);i&&(e?i.splice(i.indexOf(e)>>>0,1):n.set(t,[]))},emit:function(t,e){var i=n.get(t);i&&i.slice().map(function(n){n(e)}),(i=n.get(\"*\"))&&i.slice().map(function(n){n(t,e)})}}}\n//# sourceMappingURL=mitt.mjs.map\n","import type { Emitter } from 'mitt';\nimport mitt from 'mitt';\n\ntype Events = {\n  'list-reload': object\n};\n\nexport const emitter: Emitter<Events> = mitt<Events>();\n","import { request, Response } from \"@/utils/http\";\nimport { toast } from \"@/utils/message\";\nimport { emitter } from \"@/utils/mitt\";\nimport { ElMessage, ElMessageBox } from \"element-plus\";\nconst baseUrl = '/api/v1/';\n\ntype RowData = Manage.ManageRow | Menu.MenuRow;\n\nexport const openDialog = (dialogData: DialogData<any>, title: string, row?: RowData) => {\n  dialogData.visible = true;\n  dialogData.title = title;\n  dialogData.data = row || {};\n  return;\n};\n\n/**\n * 页面公共删除方法\n * @param ids {array} 要删除的id数组\n * @param module {string} 要删除的模块\n */\nexport const handleDelete = (ids: number[], module: string) => {\n  ElMessageBox.confirm(\n    '删除后不可恢复，确认删除操作吗？',\n    '警告',\n    {\n      confirmButtonText: '确定',\n      cancelButtonText: '取消',\n      type: 'warning',\n      draggable: true,\n    }\n  )\n    .then(async () => {\n      const { code, message } = await request<Response>({ method: 'DELETE', url: `${baseUrl}${module}`, data: { ids } });\n      if (code === 200) {\n        toast(message);\n      } else {\n        toast(message, 'error');\n      }\n    })\n    .catch(() => {\n      ElMessage({\n        type: 'info',\n        message: '操作取消',\n      });\n    });\n};\n\nexport const handleSubmit = async (dialogData: DialogData<RowData>, module: string) => {\n  dialogData.visible = false;\n  const { code, message, result } = await request<Response>({\n    method: dialogData.data?.id ? 'PUT' : 'POST',\n    url: dialogData.data?.id ? `${baseUrl}${module}/${dialogData.data.id}` : `${baseUrl}${module}`,\n    data: dialogData.data\n  });\n  emitter.emit('list-reload', {});\n};\n","<template>\n  <el-dialog\n    v-model=\"formData.visible\"\n    :title=\"formData.title\"\n    width=\"600px\"\n    draggable\n    destroy-on-close\n    :close-on-click-modal=\"false\"\n  >\n    <el-form :model=\"formData.dialogData\" label-width=\"80px\">\n      <el-form-item label=\"昵称\">\n        <el-input v-model=\"formData.data.nickname\" autocomplete=\"off\" />\n      </el-form-item>\n      <el-form-item label=\"头像\">\n        <el-input v-model=\"formData.data.avatar\" autocomplete=\"off\" />\n      </el-form-item>\n      <el-form-item label=\"用户名\">\n        <el-input v-model=\"formData.data.username\" autocomplete=\"off\" />\n      </el-form-item>\n      <el-form-item label=\"密码\">\n        <el-input v-model=\"formData.data.password\" autocomplete=\"off\" placeholder=\"为空则不修改\" />\n      </el-form-item>\n      <el-form-item label=\"角色\">\n        <el-select v-model=\"formData.data.roleId\" placeholder=\"勾选一个角色\">\n          <el-option label=\"测试角1\" value=\"1\" />\n          <el-option label=\"测试角2\" value=\"2\" />\n        </el-select>\n      </el-form-item>\n    </el-form>\n    <template #footer>\n      <span class=\"dialog-footer\">\n        <el-button @click=\"formData.visible = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"handleSubmit(formData, 'manage')\">提交</el-button>\n      </span>\n    </template>\n  </el-dialog>\n</template>\n\n<script lang='ts'>\nimport { defineComponent, reactive, ref } from 'vue';\nimport { handleSubmit } from '@/api/base';\n\nexport default defineComponent({\n  name: 'ManageDialog',\n  props: {\n    dialogData: {\n      type: Object,\n      default: () => {\n        return {\n          visible: false,\n          title: '',\n          data: {}\n        };\n      }\n    }\n  },\n  setup(props) {\n    let formData = reactive(props.dialogData);\n\n    return {\n      formData,\n      handleSubmit\n    };\n  }\n});\n</script>\n\n<style lang='less' scoped>\n</style>\n"],"names":["_withCtx","_createElementVNode","_createVNode"],"mappings":"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"}