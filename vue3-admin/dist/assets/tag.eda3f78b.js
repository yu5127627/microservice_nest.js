import{d as b,a as L,r as D,ae as $,af as T,ag as q,ah as w,f as F,ac as N,o as n,b as c,m,e as p,w as h,B as V,k as f,F as v,G as y,t as k,l as E,a5 as z}from"./vendor.b7bcae02.js";/* empty css                   *//* empty css                *//* empty css                    */import{r as M,_ as O}from"./index.12bed09f.js";import U from"./tagDialog.15e1b5cf.js";import{e as P,o as G,h as I}from"./base.7125f999.js";/* empty css                  */import"./lodash.647fddf3.js";import"./index.c28cb61c.js";const R=e=>M({method:"get",url:"/api/v1/blog/tag/list",data:e});const B="blog/tag",S=b({name:"Tag",components:{TagDialog:U},setup(){let e=L(""),l=D({visible:!1,title:"",data:{}}),o=D({data:[],load:!1,query:{limit:20,page:1,total:0,attrs:"all"}});const _=s=>{let a=[];for(const t of s){let i=a.find(u=>u.name===t.group);i?i.children?i.children.push(t):i.children=[t]:a.push({name:t.group,children:[t]})}return a},d=async()=>{try{o.load=!0;const{code:s,result:a}=await R(o.query);o.data=_(a),o.load=!1}catch{o.load=!1}};return d(),P.on("list-reload",s=>{s===B&&d()}),{group:e,MODULE:B,list:o,dialogData:l,Edit:$,Delete:T,Plus:q,openDialog:G,handleDelete:I,getList:d}}}),j={class:"page-main"},A={class:"operate-box"},H={class:"operate-btns"},J=y("\u65B0\u589E"),K={class:"custom-tree-node"};function Q(e,l,o,_,d,s){const a=z,t=w,i=F("tag-dialog"),u=N;return n(),c("div",j,[m("div",A,[m("div",H,[p(a,{type:"primary",onClick:l[0]||(l[0]=g=>{e.group="",e.openDialog(e.dialogData,"\u65B0\u589E\u6807\u7B7E")})},{default:h(()=>[J]),_:1})]),p(a,{type:"primary",icon:"Refresh",onClick:l[1]||(l[1]=()=>{e.getList()})})]),V((n(),f(t,{data:e.list.data,"node-key":"id",props:{children:"children",label:"name"},"default-expand-all":"","expand-on-click-node":!1},{default:h(({node:g,data:r})=>[m("span",K,[r.id?(n(),c(v,{key:0},[y(k(r.id)+"_",1)],64)):E("",!0),y(" "+k(g.label)+" ",1),r.group?(n(),c(v,{key:1},[p(a,{type:"primary",icon:e.Edit,size:"small",onClick:C=>e.openDialog(e.dialogData,"\u7F16\u8F91\u6807\u7B7E",r)},null,8,["icon","onClick"]),p(a,{type:"danger",icon:e.Delete,size:"small",onClick:C=>e.handleDelete([r.id],e.MODULE)},null,8,["icon","onClick"])],64)):(n(),f(a,{key:2,type:"primary",icon:e.Plus,size:"small",onClick:()=>{e.group=g.label,e.openDialog(e.dialogData,"\u65B0\u589E\u6807\u7B7E")}},null,8,["icon","onClick"]))])]),_:1},8,["data"])),[[u,e.list.load]]),e.dialogData.visible?(n(),f(i,{key:0,"dialog-data":e.dialogData,module:e.MODULE,group:e.group},null,8,["dialog-data","module","group"])):E("",!0)])}var se=O(S,[["render",Q],["__scopeId","data-v-0804f441"]]);export{se as default};
//# sourceMappingURL=tag.eda3f78b.js.map
