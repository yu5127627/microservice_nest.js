{"version":3,"file":"manage.17d84df7.js","sources":["../../src/views/system/manage/manage.vue"],"sourcesContent":["<template>\n  <div class=\"page-main\">\n    <div class=\"operate-box\">\n      <div class=\"operate-btns\">\n        <el-button type=\"primary\" @click=\"openDialog(dialogData, '新增管理员')\">新增</el-button>\n      </div>\n      <el-button type=\"primary\" icon=\"Refresh\" @click=\"() => { form.resetFields(); getList() }\" />\n    </div>\n\n    <div class=\"filter-box\">\n      <el-form ref=\"form\" class=\"filter-form\" :model=\"list.query\" label-width=\"80px\" inline>\n        <el-form-item label=\"昵称\" prop=\"nickname\">\n          <el-input v-model=\"list.query.nickname\" />\n        </el-form-item>\n        <el-form-item label=\"用户名\" prop=\"username\">\n          <el-input v-model=\"list.query.username\" />\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"getList\">搜索</el-button>\n          <el-button type=\"primary\" @click=\"() => { form.resetFields(); }\">重置</el-button>\n        </el-form-item>\n      </el-form>\n    </div>\n\n    <el-table v-loading=\"list.load\" :data=\"list.data\" border size=\"small\">\n      <el-table-column prop=\"id\" label=\"ID\" width=\"60\" align=\"center\" />\n      <el-table-column prop=\"username\" label=\"用户名\" align=\"center\" />\n      <el-table-column prop=\"nickname\" label=\"昵称\" align=\"center\" />\n      <el-table-column prop=\"avatar\" label=\"头像\" align=\"center\">\n        <template #default=\"scope\">\n          <el-image :src=\"scope.row.avatar\" style=\"width: 40px;\" />\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"roleId\" label=\"角色\" align=\"center\" />\n      <el-table-column prop=\"ctime\" label=\"创建时间\" align=\"center\" />\n      <el-table-column label=\"操作\" align=\"center\">\n        <template #default=\"scope\">\n          <el-button @click=\"openDialog(dialogData, '编辑管理员', scope.row)\">编辑</el-button>\n          <el-button type=\"danger\" @click=\"handleDelete([scope.row.id], 'manage')\">删除</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <div class=\"pagination\">\n      <el-pagination\n        v-model:currentPage=\"list.query.page\"\n        v-model:page-size=\"list.query.limit\"\n        :page-sizes=\"[15, 20, 50, 100]\"\n        small\n        layout=\"total, sizes, prev, pager, next, jumper\"\n        :total=\"list.query.total\"\n        @size-change=\"getList\"\n        @current-change=\"getList\"\n      />\n    </div>\n\n    <manage-dialog :dialog-data=\"dialogData\" />\n  </div>\n</template>\n\n<script lang='ts'>\nimport { requestPages } from '@/api/manage';\nimport { defineComponent, reactive, ref } from 'vue';\nimport { openDialog, handleDelete } from '@/api/base';\nimport ManageDialog from './components/manageDialog.vue';\nimport { emitter } from '@/utils/mitt';\n\nexport default defineComponent({\n  name: 'Manage',\n  components: {\n    manageDialog: ManageDialog\n  },\n  setup() {\n    let form = ref();\n    let dialogData = reactive<DialogData<Manage.ManageRow | {}>>({\n      visible: false,\n      title: '',\n      data: {}\n    });\n    let list = reactive<TableList<Manage.ManageRow>>({\n      data: [],\n      load: false,\n      query: {\n        page: 1,\n        limit: 15,\n        total: 0,\n        nickname: '',\n        username: ''\n      }\n    });\n\n    const getList = async () => {\n      try {\n        list.load = true;\n        const { code, result } = await requestPages(list.query);\n        list.data = result.rows;\n        list.query.total = result.total;\n        list.load = false;\n      } catch (error) {\n        list.load = false;\n      }\n    };\n    getList();\n\n    emitter.on('list-reload', (module) => {\n      if (module === 'role') getList();\n    });\n\n    return {\n      list,\n      form,\n      dialogData,\n      getList,\n      openDialog,\n      handleDelete\n    };\n  }\n});\n</script>\n\n<style lang='less' scoped>\n</style>\n"],"names":["_openBlock","_createElementBlock","_createElementVNode","_createVNode","_withCtx"],"mappings":"ijBAmEA,KAAA,GAAA,EAAA,CAA+B,KAAA,SACvB,WAAA,CACM,aAAA,CACI,EAChB,OAAA,CAEE,GAAA,GAAA,IACA,EAAA,EAAA,CAA6D,QAAA,GAClD,MAAA,GACF,KAAA,CAAA,CACA,CAAA,EAET,EAAA,EAAA,CAAiD,KAAA,CAAA,EACxC,KAAA,GACD,MAAA,CACC,KAAA,EACC,MAAA,GACC,MAAA,EACA,SAAA,GACG,SAAA,EACA,CACZ,CAAA,EAGF,KAAA,GAAA,SAAA,CACE,GAAA,CACE,EAAA,KAAA,GACA,KAAA,CAAA,OAAA,UAAA,KAAA,GAAA,EAAA,KAAA,EACA,EAAA,KAAA,EAAA,KACA,EAAA,MAAA,MAAA,EAAA,MACA,EAAA,KAAA,EAAY,MAAA,CAEZ,EAAA,KAAA,EAAY,CACd,EAEF,WAEA,EAAA,GAAA,cAAA,AAAA,GAAA,CACE,AAAA,IAAA,QAAuB,GAAQ,CAAA,EAGjC,CAAO,OACL,OACA,aACA,UACA,aACA,cACA,CACF,CAEJ,CAAA,EApHO,EAAA,CAAA,MAAA,aACE,EAAA,CAAA,MAAA,eACE,EAAA,CAAA,MAAA,oCAMF,EAAA,CAAA,MAAA,+FAkCA,GAAA,CAAA,MAAA,sGA1CP,MAAAA,GAAA,EAAAC,EAAA,MAAA,EAAA,CAwDMC,EAAA,MAAA,EAAA,CAlDEA,EAAA,MAAA,EAAA,CAFEC,EAAA,EAAA,CAD6E,KAAA,UAAjE,QAAA,EAAA,IAAA,GAAA,GAAA,AAAA,GAAA,EAAA,WAAA,EAAA,WAAA,gCAAA,EAAuC,EAAA,gBAAc,iBAEqB,KAAA,UAA5E,KAAA,UAAe,QAAA,EAAA,IAAA,GAAA,GAAA,IAAA,CAA0B,EAAA,KAAA,cAAoB,EAAA,QAAA,CAAO,EAAA,CAAA,IAGtFD,EAAA,MAAA,EAAA,CAaMC,EAAA,EAAA,CADM,IAAA,OAXG,MAAA,cAAa,MAAA,EAAA,KAAA,MAA2B,cAAA,OAAmB,OAAA,EAAO,EAAA,gBAG9DA,EAAA,EAAA,CAAA,MAAA,eAFK,KAAA,UAAU,EAAA,gBACcA,EAAA,EAAA,CAAA,WAAA,EAAA,KAAA,MAAA,SAAZ,sBAAA,EAAA,IAAA,GAAA,GAAA,AAAA,GAAA,EAAA,KAAA,MAAA,SAAA,EAAQ,EAAA,KAAA,EAAA,CAAA,YAAA,CAAA,eAIzB,MAAA,qBAFK,KAAA,UAAW,EAAA,gBACaA,EAAA,EAAA,CAAA,WAAA,EAAA,KAAA,MAAA,SAAZ,sBAAA,EAAA,IAAA,GAAA,GAAA,AAAA,GAAA,EAAA,KAAA,MAAA,SAAA,EAAQ,EAAA,KAAA,EAAA,CAAA,YAAA,CAAA,oBAKzB,QAAAC,EAAA,IAAA,CAF4CD,EAAA,EAAA,CAAA,KAAA,UAAzC,QAAA,EAAA,OAAkB,EAAA,gBAAW,6BACkC,KAAA,UAA/D,QAAA,EAAA,IAAA,GAAA,GAAA,IAAA,CAA0B,EAAA,KAAA,aAAgB,EAAA,EAAA,gBAAS,oDAsB9D,KAAA,EAAA,KAAA,KAjBiC,OAAA,GAAM,KAAA,OAAY,EAAA,gBACMA,EAAA,EAAA,CAAA,KAAA,KAA5C,MAAA,KAAW,MAAA,KAAW,MAAA,QAAW,CAAA,OACO,KAAA,WAAxC,MAAA,qBAAiB,MAAA,QAAY,CAAA,OACU,KAAA,WAAvC,MAAA,eAAiB,MAAA,QAAW,CAAA,OAKhC,KAAA,SAJI,MAAA,eAAe,MAAA,QAAW,EAAA,eACrBA,EAAA,EAAA,CACkC,IAAA,EAAA,IAAA,OAA/B,MAAA,CAAA,MAAA,MAAA,CAAQ,EAAA,KAAA,EAAA,CAAA,KAAA,CAAA,eAGqB,KAAA,SAArC,MAAA,eAAe,MAAA,QAAW,CAAA,OACY,KAAA,QAAtC,MAAA,2BAAc,MAAA,QAAa,CAAA,OAM/B,MAAA,eALK,MAAA,QAAW,EAAA,eACPA,EAAA,EAAA,CACsD,QAAA,AAAA,GAAA,EAAA,WAAA,EAAA,WAAA,iCAAA,EAAA,GAAA,CAAjB,EAAA,gBAAK,gCACsB,KAAA,SAAvE,QAAA,AAAA,GAAA,EAAA,aAAA,CAAA,EAAA,IAAA,EAAA,EAAA,QAAA,CAA2C,EAAA,gBAAgB,yDAd5D,CAAA,EAAA,EAAA,KAAA,IAAA,CAAS,CAAA,EAmB9BD,EAAA,MAAA,GAAA,CAWMC,EAAA,EAAA,CADF,YAAA,EAAA,KAAA,MAAA,KARgC,uBAAA,EAAA,IAAA,GAAA,GAAA,AAAA,GAAA,EAAA,KAAA,MAAA,KAAA,GAAI,YAAA,EAAA,KAAA,MAAA,MACN,qBAAA,EAAA,IAAA,GAAA,GAAA,AAAA,GAAA,EAAA,KAAA,MAAA,MAAA,GAAK,aAAA,CAAA,GAAA,GAAA,GAAA,GAAA,EACtB,MAAA,GACb,OAAA,0CACO,MAAA,EAAA,KAAA,MAAA,MACY,aAAA,EAAA,QACL,gBAAA,EAAA,OACG,EAAA,KAAA,EAAA,CAAA,cAAA,YAAA,QAAA,eAAA,iBAAA,CAAA,4DAIkB,CAAA"}