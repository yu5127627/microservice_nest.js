import{d as w,a as B,r as b,a7 as V,a8 as q,a9 as $,aa as M,f as L,ac as N,o as d,b as S,m as g,e,w as o,B as T,k as m,n as z,G as i,t as F,l as c,a5 as U,a4 as I,A}from"./vendor.b7bcae02.js";/* empty css                   *//* empty css                        *//* empty css                    *//* empty css                     */import{e as G,o as R,h as j}from"./base.7125f999.js";import{_ as H,c as J,g as K}from"./index.12bed09f.js";import O from"./menuDialog.2d87f448.js";import"./index.c28cb61c.js";/* empty css                  *//* empty css                */import"./lodash.647fddf3.js";const P=w({name:"Menu",components:{MenuDialog:O},setup(){const t=J();let a=B(),h=b({visible:!1,title:"",data:{type:0,icon:"",cache:!1,hide:!1,title:"",action:"",url:"",sort:99,name:"",path:"",pid:0}}),u=b({data:[],load:!1,query:{limit:20,page:1,total:0,title:"",action:"",type:"",attrs:"all"}}),D=b([]);const _=async r=>{try{u.load=!0;let{code:f,result:s}=await K(u.query,r);s.sort((n,p)=>n.sort-p.sort);let y=s.filter(n=>n.pid===0);for(const n of y)t.deepMergeMenu(n,s);u.data=y,u.load=!1}catch{u.load=!1}};return _(!0),G.on("list-reload",r=>{r==="menu"&&_(!1)}),{selectList:D,list:u,form:a,dialogData:h,getList:_,openDialog:R,handleDelete:j}}}),Q={class:"page-main"},W={class:"operate-box"},X={class:"operate-btns"},Y=i("\u65B0\u589E"),Z={class:"filter-box"},x=i("\u641C\u7D22"),ee=i("\u91CD\u7F6E"),te=i("\u76EE\u5F55"),le=i("\u83DC\u5355"),oe=i("\u5916\u94FE"),ae=i("\u89C4\u5219"),ne=i("\u7F16\u8F91"),ie=i("\u5220\u9664");function re(t,a,h,u,D,_){const r=U,f=I,s=V,y=q,n=$,p=A,E=M,k=L("menu-dialog"),v=N;return d(),S("div",Q,[g("div",W,[g("div",X,[e(r,{type:"primary",onClick:a[0]||(a[0]=l=>t.openDialog(t.dialogData,"\u65B0\u589E\u83DC\u5355"))},{default:o(()=>[Y]),_:1})]),e(r,{type:"primary",icon:"Refresh",onClick:a[1]||(a[1]=()=>{t.form.resetFields(),t.getList(!1)})})]),g("div",Z,[e(y,{ref:"form",class:"filter-form",model:t.list.query,"label-width":"80px",inline:""},{default:o(()=>[e(s,{label:"\u540D\u79F0",prop:"title"},{default:o(()=>[e(f,{modelValue:t.list.query.title,"onUpdate:modelValue":a[2]||(a[2]=l=>t.list.query.title=l)},null,8,["modelValue"])]),_:1}),e(s,{label:"\u6743\u9650",prop:"level"},{default:o(()=>[e(f,{modelValue:t.list.query.action,"onUpdate:modelValue":a[3]||(a[3]=l=>t.list.query.action=l)},null,8,["modelValue"])]),_:1}),e(s,{label:"\u7C7B\u578B",prop:"type"},{default:o(()=>[e(f,{modelValue:t.list.query.type,"onUpdate:modelValue":a[4]||(a[4]=l=>t.list.query.type=l)},null,8,["modelValue"])]),_:1}),e(s,null,{default:o(()=>[e(r,{type:"primary",onClick:a[5]||(a[5]=l=>t.getList(!0))},{default:o(()=>[x]),_:1}),e(r,{type:"primary",onClick:a[6]||(a[6]=()=>{t.form.resetFields()})},{default:o(()=>[ee]),_:1})]),_:1})]),_:1},8,["model"])]),T((d(),m(E,{data:t.list.data,border:"",size:"small","row-key":"id","default-expand-all":!0,lazy:"",style:{width:"100%"},"tree-props":{children:"children",hasChildren:"hasChildren"},onSelectionChange:a[7]||(a[7]=l=>{t.selectList=l.map(C=>C.id)})},{default:o(()=>[e(n,{type:"selection"}),e(n,{prop:"title",label:"\u540D\u79F0",align:"center"}),e(n,{prop:"icon",label:"\u56FE\u6807",align:"center"},{default:o(l=>[g("i",{class:z("iconfont "+l.row.icon)},null,2)]),_:1}),e(n,{prop:"sort",label:"\u6392\u5E8F",align:"center",width:"60"}),e(n,{prop:"action",label:"\u6743\u9650\u89C4\u5219",align:"center"}),e(n,{prop:"path",label:"\u7EC4\u4EF6\u8DEF\u5F84",align:"center"}),e(n,{prop:"cache",label:"\u7F13\u5B58",align:"center"},{default:o(l=>[i(F(l.row.cache==!0?"\u662F":"\u5426"),1)]),_:1}),e(n,{prop:"hide",label:"\u83DC\u5355\u9690\u85CF",align:"center"},{default:o(l=>[i(F(l.row.hide?"\u662F":"\u5426"),1)]),_:1}),e(n,{prop:"type",label:"\u7C7B\u578B",align:"center"},{default:o(l=>[l.row.type===0?(d(),m(p,{key:0,type:"success",effect:"plain"},{default:o(()=>[te]),_:1})):c("",!0),l.row.type===1?(d(),m(p,{key:1,effect:"plain"},{default:o(()=>[le]),_:1})):c("",!0),l.row.type===2?(d(),m(p,{key:2,effect:"plain"},{default:o(()=>[oe]),_:1})):c("",!0),l.row.type===3?(d(),m(p,{key:3,type:"info",effect:"plain"},{default:o(()=>[ae]),_:1})):c("",!0)]),_:1}),e(n,{fixed:"right",label:"\u64CD\u4F5C",align:"center"},{default:o(l=>[e(r,{onClick:C=>t.openDialog(t.dialogData,"\u7F16\u8F91\u83DC\u5355",l.row)},{default:o(()=>[ne]),_:2},1032,["onClick"]),e(r,{type:"danger",onClick:C=>t.handleDelete([l.row.id],"menu")},{default:o(()=>[ie]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[v,t.list.load]]),t.dialogData.visible?(d(),m(k,{key:0,"dialog-data":t.dialogData},null,8,["dialog-data"])):c("",!0)])}var he=H(P,[["render",re]]);export{he as default};
//# sourceMappingURL=menu.dcca8c9b.js.map
