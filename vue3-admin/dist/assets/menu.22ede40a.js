import{d as v,a as B,r as _,a9 as V,aa as q,ab as L,ac as $,f as M,ae as S,o as p,b as N,m as g,e as t,w as o,C as T,k as c,n as z,H as r,t as k,l as y,a8 as U,a7 as I,B as H}from"./vendor.5eaa8c15.js";/* empty css                   *//* empty css                        *//* empty css                    *//* empty css                     */import{e as R,o as j,h as A}from"./base.436c61c3.js";import{_ as G,d as J,g as K}from"./index.b5b877e1.js";import O from"./menuDialog.c5a463e4.js";/* empty css                  *//* empty css                *//* empty css                        *//* empty css                       */import"./lodash.5786257d.js";const P=v({name:"Menu",components:{MenuDialog:O},setup(){const e=J();let a=B(),C=_([]),D=_({visible:!1,title:"",data:{type:0,icon:"",cache:!1,hide:!1,title:"",action:"",url:"",sort:99,name:"",path:"",pid:0}}),u=_({data:[],load:!1,query:{limit:20,page:1,total:0,title:"",action:"",type:"",attrs:"all"}}),F=_([]);const s=async d=>{try{u.load=!0;let{code:m,result:f}=await K(u.query,d);f.sort((i,b)=>i.sort-b.sort),C.push(...f.map(i=>{if(i.type===0)return String(i.id)}));let n=f.filter(i=>i.pid===0);for(const i of n)e.deepMergeMenu(i,f);u.data=n,u.load=!1}catch{u.load=!1}};return s(!0),R.on("list-reload",d=>{d==="menu"&&s(!1)}),{expandList:C,selectList:F,list:u,form:a,dialogData:D,getList:s,openDialog:j,handleDelete:A}}}),Q={class:"page-main"},W={class:"operate-box"},X={class:"operate-btns"},Y=r("\u65B0\u589E"),Z={class:"filter-box"},x=r("\u641C\u7D22"),ee=r("\u91CD\u7F6E"),te=r("\u76EE\u5F55"),le=r("\u83DC\u5355"),oe=r("\u5916\u94FE"),ae=r("\u89C4\u5219"),ne=r("\u7F16\u8F91"),ie=r("\u5220\u9664");function re(e,a,C,D,u,F){const s=U,d=I,m=V,f=q,n=L,i=H,b=$,w=M("menu-dialog"),E=S;return p(),N("div",Q,[g("div",W,[g("div",X,[t(s,{type:"primary",onClick:a[0]||(a[0]=l=>e.openDialog(e.dialogData,"\u65B0\u589E\u83DC\u5355"))},{default:o(()=>[Y]),_:1})]),t(s,{type:"primary",icon:"Refresh",onClick:a[1]||(a[1]=()=>{e.form.resetFields(),e.getList(!1)})})]),g("div",Z,[t(f,{ref:"form",class:"filter-form",model:e.list.query,"label-width":"80px",inline:""},{default:o(()=>[t(m,{label:"\u540D\u79F0",prop:"title"},{default:o(()=>[t(d,{modelValue:e.list.query.title,"onUpdate:modelValue":a[2]||(a[2]=l=>e.list.query.title=l)},null,8,["modelValue"])]),_:1}),t(m,{label:"\u6743\u9650",prop:"level"},{default:o(()=>[t(d,{modelValue:e.list.query.action,"onUpdate:modelValue":a[3]||(a[3]=l=>e.list.query.action=l)},null,8,["modelValue"])]),_:1}),t(m,{label:"\u7C7B\u578B",prop:"type"},{default:o(()=>[t(d,{modelValue:e.list.query.type,"onUpdate:modelValue":a[4]||(a[4]=l=>e.list.query.type=l)},null,8,["modelValue"])]),_:1}),t(m,null,{default:o(()=>[t(s,{type:"primary",onClick:a[5]||(a[5]=l=>e.getList(!0))},{default:o(()=>[x]),_:1}),t(s,{type:"primary",onClick:a[6]||(a[6]=()=>{e.form.resetFields()})},{default:o(()=>[ee]),_:1})]),_:1})]),_:1},8,["model"])]),T((p(),c(b,{data:e.list.data,border:"",size:"small","row-key":"id","expand-row-keys":e.expandList,lazy:"",style:{width:"100%"},"tree-props":{children:"children",hasChildren:"hasChildren"},onSelectionChange:a[7]||(a[7]=l=>{e.selectList=l.map(h=>h.id)})},{default:o(()=>[t(n,{type:"selection"}),t(n,{prop:"title",label:"\u540D\u79F0",align:"center"}),t(n,{prop:"icon",label:"\u56FE\u6807",align:"center"},{default:o(l=>[g("i",{class:z("iconfont "+l.row.icon)},null,2)]),_:1}),t(n,{prop:"sort",label:"\u6392\u5E8F",align:"center",width:"60"}),t(n,{prop:"action",label:"\u6743\u9650\u89C4\u5219",align:"center"}),t(n,{prop:"path",label:"\u7EC4\u4EF6\u8DEF\u5F84",align:"center"}),t(n,{prop:"cache",label:"\u7F13\u5B58",align:"center"},{default:o(l=>[r(k(l.row.cache==!0?"\u662F":"\u5426"),1)]),_:1}),t(n,{prop:"hide",label:"\u83DC\u5355\u9690\u85CF",align:"center"},{default:o(l=>[r(k(l.row.hide?"\u662F":"\u5426"),1)]),_:1}),t(n,{prop:"type",label:"\u7C7B\u578B",align:"center"},{default:o(l=>[l.row.type===0?(p(),c(i,{key:0,type:"success",effect:"plain"},{default:o(()=>[te]),_:1})):y("",!0),l.row.type===1?(p(),c(i,{key:1,effect:"plain"},{default:o(()=>[le]),_:1})):y("",!0),l.row.type===2?(p(),c(i,{key:2,effect:"plain"},{default:o(()=>[oe]),_:1})):y("",!0),l.row.type===3?(p(),c(i,{key:3,type:"info",effect:"plain"},{default:o(()=>[ae]),_:1})):y("",!0)]),_:1}),t(n,{fixed:"right",label:"\u64CD\u4F5C",align:"center"},{default:o(l=>[t(s,{onClick:h=>e.openDialog(e.dialogData,"\u7F16\u8F91\u83DC\u5355",l.row)},{default:o(()=>[ne]),_:2},1032,["onClick"]),t(s,{type:"danger",onClick:h=>e.handleDelete([l.row.id],"menu")},{default:o(()=>[ie]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","expand-row-keys"])),[[E,e.list.load]]),e.dialogData.visible?(p(),c(w,{key:0,"dialog-data":e.dialogData},null,8,["dialog-data"])):y("",!0)])}var De=G(P,[["render",re]]);export{De as default};
//# sourceMappingURL=menu.22ede40a.js.map
