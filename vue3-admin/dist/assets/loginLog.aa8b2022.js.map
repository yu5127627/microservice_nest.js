{"version":3,"file":"loginLog.aa8b2022.js","sources":["../../src/api/log.ts","../../src/views/log/loginLog.vue"],"sourcesContent":["import { request, Response } from \"@/utils/http\";\n\n// 获取登录日志列表\nexport const requestLogLoginPages = (data: TableListQuery) => {\n  return request<Response>({\n    method: 'get',\n    url: '/api/v1/log/login',\n    data\n  });\n};\n","<template>\n  <div class=\"page-main\">\n    <div class=\"filter-box\">\n      <el-form ref=\"form\" class=\"filter-form\" :model=\"list.query\" label-width=\"80px\" inline>\n        <el-form-item label=\"名称\" prop=\"username\">\n          <el-input v-model=\"list.query.username\" />\n        </el-form-item>\n        <el-form-item label=\"级别\" prop=\"address\">\n          <el-input v-model=\"list.query.address\" />\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"getList\">搜索</el-button>\n          <el-button type=\"primary\" @click=\"() => { form.resetFields(); }\">重置</el-button>\n        </el-form-item>\n      </el-form>\n    </div>\n\n    <el-table v-loading=\"list.load\" :data=\"list.data\" border size=\"small\">\n      <el-table-column prop=\"id\" label=\"ID\" width=\"80\" align=\"center\" />\n      <el-table-column prop=\"username\" label=\"用户名\" align=\"center\" />\n      <el-table-column prop=\"manageId\" label=\"管理员\" align=\"center\" />\n      <el-table-column prop=\"ip\" label=\"IP\" align=\"center\" />\n      <el-table-column prop=\"address\" label=\"地址\" align=\"center\" />\n      <el-table-column prop=\"ua\" label=\"UA\" align=\"center\" width=\"360\" />\n      <el-table-column prop=\"login_time\" label=\"登陆时间\" align=\"center\" />\n      <!-- <el-table-column label=\"操作\" align=\"center\">\n        <template #default=\"scope\">\n          <el-button @click=\"openDialog(dialogData, '编辑角色', scope.row)\">编辑</el-button>\n          <el-button type=\"danger\" @click=\"handleDelete([scope.row.id], 'role')\">删除</el-button>\n        </template>\n      </el-table-column>-->\n    </el-table>\n\n    <div class=\"pagination\">\n      <el-pagination\n        v-model:currentPage=\"list.query.page\"\n        v-model:page-size=\"list.query.limit\"\n        :page-sizes=\"[20, 50, 100]\"\n        small\n        layout=\"total, sizes, prev, pager, next, jumper\"\n        :total=\"list.query.total\"\n        @size-change=\"getList\"\n        @current-change=\"getList\"\n      />\n    </div>\n  </div>\n</template>\n\n<script lang='ts'>\nimport { requestLogLoginPages } from '@/api/log';\nimport { defineComponent, reactive, ref } from 'vue';\nimport { openDialog, handleDelete } from '@/api/base';\n\nexport default defineComponent({\n  name: 'LoginLog',\n  setup() {\n    let form = ref();\n    let dialogData = reactive<DialogData<Log.LoginRow | {}>>({\n      visible: false,\n      title: '',\n      data: {}\n    });\n    let list = reactive<TableList<Log.LoginRow>>({\n      data: [],\n      load: false,\n      query: {\n        page: 1,\n        limit: 20,\n        total: 0,\n        username: '',\n        address: ''\n      }\n    });\n\n    const getList = async () => {\n      try {\n        list.load = true;\n        const { code, result } = await requestLogLoginPages(list.query);\n        list.data = result.rows;\n        list.query.total = result.total;\n        list.load = false;\n      } catch (error) {\n        list.load = false;\n      }\n    };\n    getList();\n\n    return {\n      list,\n      form,\n      dialogData,\n      getList,\n      openDialog,\n      handleDelete\n    };\n  }\n});\n</script>\n\n<style lang='less' scoped>\n</style>\n"],"names":["_openBlock","_createElementBlock","_createElementVNode","_createVNode","_withCtx"],"mappings":"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"}