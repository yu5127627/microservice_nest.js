var ye=Object.defineProperty,ve=Object.defineProperties;var $e=Object.getOwnPropertyDescriptors;var te=Object.getOwnPropertySymbols;var be=Object.prototype.hasOwnProperty,ke=Object.prototype.propertyIsEnumerable;var X=(e,n,t)=>n in e?ye(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,P=(e,n)=>{for(var t in n||(n={}))be.call(n,t)&&X(e,t,n[t]);if(te)for(var t of te(n))ke.call(n,t)&&X(e,t,n[t]);return e},W=(e,n)=>ve(e,$e(n));var V=(e,n,t)=>(X(e,typeof n!="symbol"?n+"":n,t),t);import{c as Ee,d as E,a as h,b as f,r as C,o as l,e as K,f as B,g as I,s as Ce,h as we,l as Ie,i as Se,m as Me,j as Re,u as Ae,E as x,k as Le,n as Oe,p as g,w as _,F as R,q as k,t as $,v as N,x as M,y as F,z as ie,A as ce,B as Te,C as qe,D as Pe,G as q,H as Ve,I as De,J as Be,K as Ne,L as ze,M as xe,N as Fe,O as Ue,P as je,Q as He,R as Xe,S as We,T as Ye,U as Ge,V as Je,W as Ke,X as ne,Y as D,Z as oe,_ as se,$ as Qe,a0 as ae,a1 as w,a2 as Ze}from"./vendor.4870a2ae.js";const et=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerpolicy&&(r.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?r.credentials="include":a.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(a){if(a.ep)return;a.ep=!0;const r=t(a);fetch(a.href,r)}};et();const Q=Ee();function tt(e){e.use(Q)}const nt={class:"app-view"},ot=E({setup(e){return(n,t)=>{const s=C("router-view");return l(),h("div",nt,[f(s)])}}}),st="modulepreload",re={},at="./",T=function(n,t){return!t||t.length===0?n():Promise.all(t.map(s=>{if(s=`${at}${s}`,s in re)return;re[s]=!0;const a=s.endsWith(".css"),r=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${r}`))return;const o=document.createElement("link");if(o.rel=a?"stylesheet":st,a||(o.as="script",o.crossOrigin=""),o.href=s,document.head.appendChild(o),a)return new Promise((u,i)=>{o.addEventListener("load",u),o.addEventListener("error",()=>i(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>n())},U=K("menu",()=>{const e=B([]),n=B([]),t=B([...J]),s=I([{name:"\u4EEA\u8868\u76D8",path:"/dashboard"}]),a=(i,p)=>{for(const c of i)u(c,p);return n.push(...i,{id:9999,path:"/:pathMatch(.*)*",component:()=>T(()=>import("./404.ff2b7ded.js"),["assets/404.ff2b7ded.js","assets/vendor.4870a2ae.js","assets/vendor.5ae42ba3.css"]),meta:{title:"404",type:1,cache:!1,pid:0},hidden:!0,redirect:"/"}),J.push(...n),t.push(...i),n},r=i=>{const{id:p,type:c,icon:d,cache:m,hide:y,title:A,url:b,name:L,action:H,sort:Jt,path:ee,pid:he,redirect:ge}=i;return{id:p,path:b,component:ee?()=>T(()=>import(`../../views${ee}`),[]):Ce(fe),redirect:ge,hidden:y,alwaysShow:!0,name:L,meta:{type:c,icon:d,cache:m,title:A,pid:he}}},o=i=>{const p=[],c=[],d=[];i.sort((m,y)=>m.sort-y.sort);for(const m of i){const{id:y,title:A,action:b,sort:L,pid:H}=m;m.type===3?d.push({id:y,pid:H,title:A,action:b,sort:L}):(e.push(m),H===0?p.push(r(m)):c.push(r(m)))}return{topMenu:p,subMenu:c,actions:d}},u=(i,p)=>{var d;const c=[];for(const m of p)((d=m.meta)==null?void 0:d.pid)===i.id&&(m.path=i.path+m.path,c.push(m));c.length&&(i.children=c)};return{filterMenu:o,resolveMenu:r,keepTags:s,originAsyncMenu:e,asyncMenu:n,allMenu:t,setAsyncMenu:a}}),rt={collectionTag:we,list:Ie,house:Se,menuIcon:Me,chatRound:Re};var S=(e,n)=>{const t=e.__vccOpts||e;for(const[s,a]of n)t[s]=a;return t};const it=E({name:"MenuItem",components:P({},rt),props:{item:{type:Object,required:!0}},setup(e){const t=U().allMenu,s=Ae();return{menu:t,handleMenuItem:r=>{var o;((o=r.meta)==null?void 0:o.type)===2?window.open(r.path):s.push({path:r.path})}}}});function ct(e,n,t,s,a,r){var c;const o=x,u=C("menu-item",!0),i=Le,p=Oe;return e.item.hidden?k("",!0):(l(),h(R,{key:0},[e.item.alwaysShow&&((c=e.item.children)==null?void 0:c.length)?(l(),g(i,{key:0,index:e.item.path},{title:_(()=>{var d;return[(d=e.item.meta)!=null&&d.icon?(l(),g(o,{key:0},{default:_(()=>{var m;return[$("i",{class:N("iconfont "+((m=e.item.meta)==null?void 0:m.icon))},null,2)]}),_:1})):k("",!0),$("span",null,M(e.item.meta.title),1)]}),default:_(()=>[e.item.children.length?(l(!0),h(R,{key:0},F(e.item.children,d=>(l(),g(u,{key:d.path,item:d},null,8,["item"]))),128)):k("",!0)]),_:1},8,["index"])):!e.item.alwaysShow&&e.item.children?(l(),g(p,{key:1,index:e.item.children[0].path,onClick:n[0]||(n[0]=d=>e.handleMenuItem(e.item.children[0]))},{title:_(()=>{var d,m;return[(d=e.item.children[0].meta)!=null&&d.icon?(l(),g(o,{key:0},{default:_(()=>{var y;return[$("i",{class:N("iconfont "+((y=e.item.children[0].meta)==null?void 0:y.icon))},null,2)]}),_:1})):k("",!0),$("span",null,M((m=e.item.children[0].meta)==null?void 0:m.title),1)]}),_:1},8,["index"])):(l(),g(p,{key:2,index:e.item.path,onClick:n[1]||(n[1]=d=>e.handleMenuItem(e.item))},{title:_(()=>{var d,m;return[(d=e.item.meta)!=null&&d.icon?(l(),g(o,{key:0},{default:_(()=>{var y;return[$("i",{class:N("iconfont "+((y=e.item.meta)==null?void 0:y.icon))},null,2)]}),_:1})):k("",!0),$("span",null,M((m=e.item.meta)==null?void 0:m.title),1)]}),_:1},8,["index"]))],64))}var le=S(it,[["render",ct]]);const ue=K("setting",()=>{const e=I(!1),n="Nest.js \u5FAE\u670D\u52A1\u540E\u53F0\u7BA1\u7406\u6A21\u677F";return{sidebarLog:I(!1),title:n,isCollapse:e}});const lt=E({name:"Sidebar",components:{menuItem:le},setup(){const n=U().allMenu,t=ue(),s=ie();return{menu:n,route:s,settingStore:t,handleOpen:(o,u)=>{},handleClose:(o,u)=>{}}}}),ut=["width"],dt={key:0,class:"sidebar-title"};function pt(e,n,t,s,a,r){const o=ce,u=le,i=Te,p=qe;return l(),g(p,{width:e.settingStore.isCollapse?"64px":"210px"},{default:_(()=>[e.settingStore.sidebarLog?(l(),h("div",{key:0,width:e.settingStore.isCollapse?"64px":"200px",class:"horizontal-collapse-transition sidebar-header"},[f(o,{class:"sidebar-logo",src:"http://egg.yls.red/static/img/logo.21bf62ca.png"}),e.settingStore.isCollapse?k("",!0):(l(),h("h1",dt,"nestjs \u5FAE\u670D\u52A1"))],8,ut)):k("",!0),f(i,{"default-active":e.route.path,"background-color":"#304156","text-color":"#fff",collapse:e.settingStore.isCollapse,"unique-opened":"","collapse-transition":!1,onOpen:e.handleOpen,onClose:e.handleClose},{default:_(()=>[(l(!0),h(R,null,F(e.menu,c=>(l(),g(u,{key:c.path,item:c},null,8,["item"]))),128))]),_:1},8,["default-active","collapse","onOpen","onClose"])]),_:1},8,["width"])}var de=S(lt,[["render",pt]]);const _t=E({name:"TagView",setup(){U();const e=I([{name:"Tag 1",type:""},{name:"Tag 2",type:"success"},{name:"Tag 3",type:"info"},{name:"Tag 4",type:"warning"},{name:"Tag 5",type:"danger"}]);return{tags:e,handleClose:t=>{e.value.splice(t,1)}}}}),mt={class:"tag-view"};function ft(e,n,t,s,a,r){const o=Pe;return l(),h("div",mt,[(l(!0),h(R,null,F(e.tags,(u,i)=>(l(),g(o,{key:u.name,closable:"",type:"success",onClose:p=>e.handleClose(i)},{default:_(()=>[q(M(u.name),1)]),_:2},1032,["onClose"]))),128))])}var pe=S(_t,[["render",ft],["__scopeId","data-v-2f241d7d"]]);const ht=E({name:"Avatar",components:{caretBottom:Ve}}),gt={class:"avatar-container"},yt=q("\u6587\u6863"),vt=q("\u4E2A\u4EBA\u4E2D\u5FC3"),$t=q("\u9000\u51FA\u767B\u5F55");function bt(e,n,t,s,a,r){const o=ce,u=C("caret-bottom"),i=x,p=De,c=Be,d=Ne;return l(),h("div",gt,[f(d,{trigger:"click",size:"small"},{dropdown:_(()=>[f(c,null,{default:_(()=>[f(p,null,{default:_(()=>[yt]),_:1}),f(p,null,{default:_(()=>[vt]),_:1}),f(p,null,{default:_(()=>[$t]),_:1})]),_:1})]),default:_(()=>[f(o,{src:"http://egg.yls.red/upload/avatar.gif?imageView2/1/w/80/h/80",class:"user-avatar"}),f(i,null,{default:_(()=>[f(u)]),_:1})]),_:1})])}var _e=S(ht,[["render",bt]]);const kt=E({name:"ActionBar",components:{fullScreen:ze}}),Et={class:"action-bar"};function Ct(e,n,t,s,a,r){const o=C("full-screen"),u=x;return l(),h("div",Et,[f(u,{size:25},{default:_(()=>[f(o)]),_:1})])}var me=S(kt,[["render",Ct],["__scopeId","data-v-093e30d6"]]);const wt=E({name:"Header",components:{expand:xe,fold:Fe,avatar:_e,actionBar:me,tagView:pe},setup(){const e=ie(),n=ue();let t=I([]);const s=()=>{n.isCollapse=!n.isCollapse};Ue(e,(r,o)=>{a()});const a=()=>{let r=e.matched.filter(o=>o.meta&&o.meta.title);t.value=[{path:"/dashboard",meta:{title:"\u4EEA\u8868\u76D8"}},...r]};return a(),{settingStore:n,breadcrumbList:t,handleCollapseChange:s}}}),It={class:"header-action"},St={class:"icon-box"},Mt={class:"breadcrumb"},Rt={key:0},At=["href"];function Lt(e,n,t,s,a,r){const o=C("expand"),u=C("fold"),i=x,p=je,c=He,d=me,m=_e,y=pe,A=Xe;return l(),g(A,null,{default:_(()=>[$("div",It,[$("div",St,[f(i,{size:24,color:"#999",onClick:e.handleCollapseChange},{default:_(()=>[e.settingStore.isCollapse?(l(),g(o,{key:0})):(l(),g(u,{key:1}))]),_:1},8,["onClick"])]),$("div",Mt,[f(c,{separator:"/"},{default:_(()=>[(l(!0),h(R,null,F(e.breadcrumbList,(b,L)=>(l(),g(p,{key:b.path},{default:_(()=>[L%2!==0||e.$route.path===b.path?(l(),h("span",Rt,M(b.meta.title),1)):(l(),h("a",{key:1,href:b.path},M(b.meta.title),9,At))]),_:2},1024))),128))]),_:1})]),f(d),f(m)]),f(y)]),_:1})}var Ot=S(wt,[["render",Lt]]);const Tt=E({name:"Layout",components:{sidebar:de,uheader:Ot}}),qt=q("Footer");function Pt(e,n,t,s,a,r){const o=de,u=C("uheader"),i=C("router-view"),p=We,c=Ye,d=Ge;return l(),g(d,{class:"app-container"},{default:_(()=>[f(o),f(d,null,{default:_(()=>[f(u),f(p,null,{default:_(()=>[f(i)]),_:1}),f(c,null,{default:_(()=>[qt]),_:1})]),_:1})]),_:1})}var fe=S(Tt,[["render",Pt]]);const J=[{path:"/login",component:()=>T(()=>import("./login.c01bc428.js"),["assets/login.c01bc428.js","assets/login.7117cce0.css","assets/vendor.4870a2ae.js","assets/vendor.5ae42ba3.css"]),hidden:!0},{path:"/404",component:()=>T(()=>import("./404.ff2b7ded.js"),["assets/404.ff2b7ded.js","assets/vendor.4870a2ae.js","assets/vendor.5ae42ba3.css"]),hidden:!0},{path:"/",component:fe,redirect:"/dashboard",meta:{title:"\u4EEA\u8868\u76D8",icon:"icon-configure",affix:!0},alwaysShow:!0,children:[{path:"/dashboard",name:"Dashboard",component:()=>T(()=>import("./dashboard.61fdcd6c.js"),["assets/dashboard.61fdcd6c.js","assets/vendor.4870a2ae.js","assets/vendor.5ae42ba3.css"]),meta:{title:"\u4EEA\u8868\u76D8",icon:"icon-configure",affix:!0}}]}],z=Je({history:Ke(),routes:J});const Vt=["innerHTML"],Dt=["xlink:href"],Bt={name:"Icon"},Y=E(W(P({},Bt),{props:{content:{type:String,default:""},size:{type:Number,default:18},width:{type:Number,default:20},height:{type:Number,default:20},color:{type:String,default:""},svg:{type:Boolean,default:!1}},emits:["click"],setup(e,{emit:n}){const t=e;let s=I(""),a=ne(()=>t.content.indexOf("fa-")>-1?t.content.indexOf("fa ")===0?t.content:["fa",t.content]:t.content.indexOf("el-icon-")>-1?t.content:t.content.indexOf("#")>-1?(s.value=t.content,"iconfont"):(s.value=t.content,"")),r=ne(()=>"font-size: "+t.size+"px; color: "+t.color+"; width: "+t.width+"px; height: "+t.height+"px; font-style: normal;");const o=()=>{n("click")};return(u,i)=>(l(),h(R,null,[t.svg?k("",!0):(l(),h("i",{key:0,class:N(D(a)),style:oe(D(r)),onClick:o,innerHTML:D(s)},null,14,Vt)),t.svg?(l(),h("svg",{key:1,class:"icon-svg","aria-hidden":"true",style:oe(D(r)),onClick:o},[$("use",{"xlink:href":`#${t.content}`},null,8,Dt)],4)):k("",!0)],64))}})),Nt=Object.assign(Y,{install(e){e.component(Y.name,Y)}});var zt={Icon:Nt};const xt=()=>({VITE_APP_TITLE:"\u751F\u4EA7\u73AF\u5883",VITE_BASE_URL:"http://192.168.3.99:7001/",VITE_SOME_KEY:"123",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0}),{VITE_PROXY_DOMAIN:Zt,VITE_PROXY_DOMAIN_REAL:Ft}=xt(),Ut={baseURL:Ft,timeout:1e4,headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},paramsSerializer:e=>ae.stringify(e,{indices:!1}),transformRequest:[(e,n)=>{switch(n["Content-Type"].toLowerCase()){case"application/x-www-form-urlencoded":return ae.stringify(e);case"multipart/form-data;charset=utf-8":return e;default:return JSON.stringify(e)}}]},v=class{constructor(){this.httpInterceptorsRequest(),this.httpInterceptorsResponse()}httpInterceptorsRequest(){v.axiosInstance.interceptors.request.use(n=>{const t=n;if(typeof n.beforeRequestCallback=="function")return n.beforeRequestCallback(t),t;if(v.initConfig.beforeRequestCallback)return v.initConfig.beforeRequestCallback(t),t;const s=sessionStorage.getItem("token");return s&&(n.headers.Authorization="Bearer "+s),t},n=>Promise.reject(n))}httpInterceptorsResponse(){v.axiosInstance.interceptors.response.use(t=>{const s=t.config;return typeof s.beforeResponseCallback=="function"?(s.beforeResponseCallback(t),t.data):(v.initConfig.beforeResponseCallback&&v.initConfig.beforeResponseCallback(t),t.data)},t=>{const s=t;return s.isCancelRequest=se.isCancel(s),Promise.reject(s)})}request({method:n="GET",url:t,data:s={},cache:a=!1,headers:r={}}){let o,u={};if(a){if(o=Qe(u?n+t+JSON.stringify(u):n+t),v.caches[o])return v.caches[o];v.caches[o]=null}return n.toLocaleUpperCase()==="GET"&&(u=s,s={}),new Promise((i,p)=>{v.axiosInstance.request({method:n,url:t,params:u,data:s,headers:r}).then(c=>{a&&(v.caches[o]=c),i(c)}).catch(c=>{p(c)})})}};let O=v;V(O,"caches",{}),V(O,"initConfig",{}),V(O,"axiosInstance",se.create(Ut));const jt=new O,Z=jt.request,Ht=e=>Z({method:"get",url:"/api/v1/menu/list",data:e}),en=e=>Z({method:"POST",url:"/api/v1/auth/login",data:e}),Xt=()=>Z({method:"get",url:"/api/v1/auth/detail"}),Wt=K("user",()=>{const e=I(null);let n=B({avatar:"",ctime:"",id:null,nickname:"",roleId:null,username:""});return{userInfo:n,token:e,setToken:a=>{e.value=a,sessionStorage.setItem("token",a)},setUserInfo:a=>{const{avatar:r,ctime:o,id:u,nickname:i,roleId:p,username:c}=a;n={avatar:r,ctime:o,id:u,nickname:i,roleId:p,username:c}}}});w.configure({easing:"ease",speed:500,showSpinner:!1,trickleSpeed:200,minimum:.3});const G=U(Q),Yt=Wt(Q),Gt=["/login"];z.beforeEach(async(e,n,t)=>{if(w.start(),sessionStorage.getItem("token")){if(e.path==="/login")return e.query.to?t(`${e.query.to}`):t("/");if(G.asyncMenu.length>0)return t();try{const[r,o]=await Promise.all([Xt(),Ht({attrs:"all"})]);if(r.code===200&&o.code===200){Yt.$state.userInfo=r.result;const{topMenu:u,subMenu:i,actions:p}=G.filterMenu(o.result),c=G.setAsyncMenu(u,i);for(const d of c)z.addRoute(d);w.done(),t(W(P({},e),{replace:!0}))}}catch(r){console.log(r),w.done(),t(`/login?to=${e.path}`)}}else{if(Gt.includes(e.path)){w.done(),t();return}w.done(),t(`/login?to=${e.path}`)}});z.afterEach((e,n)=>{w.done()});const j=Ze(ot);tt(j);j.use(z);j.component("Icon",zt);j.mount("#app");export{S as _,Wt as a,U as b,en as g,ue as u};
//# sourceMappingURL=index.5aa7076e.js.map
