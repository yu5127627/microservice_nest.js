{"version":3,"file":"role.92fcaec8.js","sources":["../../src/api/role.ts","../../src/views/system/role/role.vue"],"sourcesContent":["import { request, Response } from \"@/utils/http\";\n\n// 获取角色列表\nexport const requestPages = (data: TableListQuery) => {\n  return request<Response>({\n    method: 'get',\n    url: '/api/v1/role',\n    data\n  });\n};\n","<template>\n  <div class=\"page-main\">\n    <div class=\"operate-box\">\n      <div class=\"operate-btns\">\n        <el-button type=\"primary\" @click=\"openDialog(dialogData, '新增角色')\">新增</el-button>\n      </div>\n      <el-button type=\"primary\" icon=\"Refresh\" @click=\"() => { form.resetFields(); getList() }\" />\n    </div>\n\n    <div class=\"filter-box\">\n      <el-form ref=\"form\" class=\"filter-form\" :model=\"list.query\" label-width=\"80px\" inline>\n        <el-form-item label=\"名称\" prop=\"name\">\n          <el-input v-model=\"list.query.name\" />\n        </el-form-item>\n        <el-form-item label=\"级别\" prop=\"level\">\n          <el-input v-model=\"list.query.level\" />\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"getList\">搜索</el-button>\n          <el-button type=\"primary\" @click=\"() => { form.resetFields(); }\">重置</el-button>\n        </el-form-item>\n      </el-form>\n    </div>\n\n    <el-table v-loading=\"list.load\" :data=\"list.data\" border size=\"small\">\n      <el-table-column prop=\"id\" label=\"ID\" width=\"60\" align=\"center\" />\n      <el-table-column prop=\"name\" label=\"名称\" align=\"center\" />\n      <el-table-column prop=\"description\" label=\"描述\" align=\"center\" />\n      <el-table-column prop=\"level\" label=\"级别\" align=\"center\" />\n      <el-table-column label=\"操作\" align=\"center\">\n        <template #default=\"scope\">\n          <el-button @click=\"openDialog(dialogData, '编辑角色', scope.row)\">编辑</el-button>\n          <el-button type=\"danger\" @click=\"handleDelete([scope.row.id], 'role')\">删除</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <div class=\"pagination\">\n      <el-pagination\n        v-model:currentPage=\"list.query.page\"\n        v-model:page-size=\"list.query.limit\"\n        :page-sizes=\"[15, 20, 50, 100]\"\n        small\n        layout=\"total, sizes, prev, pager, next, jumper\"\n        :total=\"list.query.total\"\n        @size-change=\"getList\"\n        @current-change=\"getList\"\n      />\n    </div>\n\n    <role-dialog :dialog-data=\"dialogData\" />\n  </div>\n</template>\n\n<script lang='ts'>\nimport { requestPages } from '@/api/role';\nimport { defineComponent, reactive, ref } from 'vue';\nimport { openDialog, handleDelete } from '@/api/base';\nimport RoleDialog from './components/roleDialog.vue';\nimport { emitter } from '@/utils/mitt';\n\nexport default defineComponent({\n  name: 'Role',\n  components: {\n    roleDialog: RoleDialog\n  },\n  setup() {\n    let form = ref();\n    let dialogData = reactive<DialogData<Role.RoleRow | {}>>({\n      visible: false,\n      title: '',\n      data: {}\n    });\n    let list = reactive<TableList<Role.RoleRow>>({\n      data: [],\n      load: false,\n      query: {\n        page: 1,\n        limit: 15,\n        total: 0,\n        name: '',\n        level: ''\n      }\n    });\n\n    const getList = async () => {\n      try {\n        list.load = true;\n        const { code, result } = await requestPages(list.query);\n        list.data = result.rows;\n        list.query.total = result.total;\n        list.load = false;\n      } catch (error) {\n        list.load = false;\n      }\n    };\n    getList();\n\n    emitter.on('list-reload', (module) => {\n      if (module === 'role') getList();\n    });\n\n    return {\n      list,\n      form,\n      dialogData,\n      getList,\n      openDialog,\n      handleDelete\n    };\n  }\n});\n</script>\n\n<style lang='less' scoped>\n</style>\n"],"names":["_openBlock","_createElementBlock","_createElementVNode","_createVNode","_withCtx"],"mappings":"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"}