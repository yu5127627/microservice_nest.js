{"version":3,"file":"login.2f5d4cc9.js","sources":["../../src/utils/message/index.ts","../../src/views/login/login.vue"],"sourcesContent":["import { ElMessage } from 'element-plus';\n\nconst toast = (message:string, type?:any, duration?:number, icon?: 'string') => {\n  return ElMessage({\n    message,\n    showClose: true,\n    type: type || 'success',\n    duration: duration || 2000,\n    icon\n  });\n};\n\nexport { toast };\n","<template>\n  <div class=\"login-page\">\n    <div class=\"form-box\">\n      <h1 class=\"title\">{{ settingStore.title }}</h1>\n      <el-input v-model=\"formData.username\" class=\"item-input\" placeholder=\"账号\">\n        <template #prefix>\n          <el-icon class=\"el-input__icon\">\n            <avatar-icon />\n          </el-icon>\n        </template>\n      </el-input>\n\n      <el-input\n        v-model=\"formData.password\"\n        type=\"password\"\n        class=\"item-input\"\n        placeholder=\"密码\"\n        show-password\n      >\n        <template #prefix>\n          <el-icon class=\"el-input__icon\">\n            <avatar-icon />\n          </el-icon>\n        </template>\n      </el-input>\n\n      <el-button\n        type=\"primary\"\n        auto-insert-space\n        style=\"width: 100%; margin-bottom: 30px;\"\n        @click=\"handleSubmit\"\n      >登陆</el-button>\n    </div>\n  </div>\n</template>\n\n<script lang='ts'>\nimport { defineComponent, reactive, ref } from 'vue';\nimport { Avatar as AvatarIcon } from '@element-plus/icons-vue';\nimport { useSettingStore } from '@/store/modules/setting';\nimport { useUserStore } from '@/store/modules/user';\nimport { toast } from '@/utils/message';\nimport { useRouter, useRoute } from 'vue-router';\nimport { login } from '@/api/manage';\n\nexport default defineComponent({\n  name: 'Login',\n  components: {\n    avatarIcon: AvatarIcon,\n  },\n  setup() {\n    const settingStore = useSettingStore();\n    const userStore = useUserStore();\n    const router = useRouter();\n    const route = useRoute();\n    const targetPath: any = route.query.to; // 退出登录时的地址\n    let formData = reactive<Manage.LoginDto>({ username: 'admin', password: '123456' });\n\n    const handleSubmit = async () => {\n      try {\n        const { code, result, message } = await login({ username: formData.username, password: formData.password });\n        if (code === 200 && result) {\n          toast(message);\n          userStore.setToken(result);\n          router.push({ path: targetPath || '/' });\n        }\n      } catch (error) {\n        // @ts-ignore\n        toast(error.message, 'error');\n      }\n    };\n\n    return { formData, settingStore, handleSubmit };\n  }\n});\n</script>\n\n<style lang='less' scoped>\n.login-page {\n  width: 100vw;\n  height: 100vh;\n  // transform: rotate(50%, 50%);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-image: url(\"@/assets/01.jpg\");\n  .form-box {\n    display: flex;\n    align-items: center;\n    flex-direction: column;\n    width: 500px;\n    height: 500px;\n    .title {\n      letter-spacing: 1px;\n      color: #fff;\n    }\n    .item-input {\n      width: 500px;\n      margin: 20px 0;\n      height: 50px;\n      line-height: 50px;\n    }\n    ::v-deep {\n      .el-input__inner {\n        height: 50px;\n      }\n    }\n  }\n}\n</style>\n"],"names":["AvatarIcon","login","_openBlock","_createElementBlock","_createElementVNode","_toDisplayString","_createVNode","_withCtx"],"mappings":"sNAEA,KAAM,GAAQ,CAAC,EAAgB,EAAW,EAAkB,IACnD,EAAU,CACf,UACA,UAAW,GACX,KAAM,GAAQ,UACd,SAAU,GAAY,IACtB,MAAA,CACD,ECoCH,KAAA,GAAA,EAAA,CAA+B,KAAA,QACvB,WAAA,CACM,WAAAA,CACE,EACd,OAAA,CAEE,KAAA,GAAA,IACA,EAAA,IACA,EAAA,IAEA,EAAA,AADA,IACA,MAAA,GACA,GAAA,GAAA,EAAA,CAAA,SAAA,QAAA,SAAA,QAAA,CAAA,EAgBA,MAAA,CAAA,WAAA,eAAA,aAdA,SAAA,CACE,GAAA,CACE,KAAA,CAAA,OAAA,SAAA,WAAA,KAAAC,GAAA,CAAA,SAAA,EAAA,SAAA,SAAA,EAAA,QAAA,CAAA,EACA,AAAA,IAAA,KAAA,GACE,GAAA,CAAA,EACA,EAAA,SAAA,CAAA,EACA,EAAA,KAAA,CAAA,KAAA,GAAA,GAAA,CAAA,EACF,OAAA,EAAA,CAGA,EAAA,EAAA,QAAA,OAAA,CAA4B,CAC9B,EAG4C,CAElD,CAAA,EAzEO,EAAA,CAAA,MAAA,cACE,EAAA,CAAA,MAAA,YACC,EAAA,CAAA,MAAA,0FAFR,MAAAC,GAAA,EAAAC,EAAA,MAAA,EAAA,CAgCMC,EAAA,MAAA,EAAA,CADEA,EAAA,KAAA,EAAAC,EAAA,EAAA,aAAA,KAAA,EAAA,CAAA,EA7BmCC,EAAA,EAAA,CAO5B,WAAA,EAAA,SAAA,SANiB,sBAAA,EAAA,IAAA,GAAA,GAAA,AAAA,GAAA,EAAA,SAAA,SAAA,GAAQ,MAAA,aAAQ,YAAA,cAAyB,EAAA,CACxD,OAAAC,EAAA,IAAA,CAGCD,EAAA,EAAA,CAAA,MAAA,gBAAA,EAAA,CAFqB,QAAAC,EAAA,IAAA,CACdD,EAAA,CAAA,CAAA,CAAA,sCAiBV,WAAA,EAAA,SAAA,SAXS,sBAAA,EAAA,IAAA,GAAA,GAAA,AAAA,GAAA,EAAA,SAAA,SAAA,GAAQ,KAAA,WACrB,MAAA,aACC,YAAA,eACM,gBAAA,EACZ,EAAA,CAEW,OAAAC,EAAA,IAAA,CAGCD,EAAA,EAAA,CAAA,MAAA,gBAAA,EAAA,CAFqB,QAAAC,EAAA,IAAA,CACdD,EAAA,CAAA,CAAA,CAAA,sCAUN,KAAA,UAJR,oBAAA,GACL,MAAA,CAAA,MAAA,OAAA,gBAAA,MAAA,EACA,QAAA,EAAA,YACQ,EAAA,gBACP"}