import{d as q,a as E,r as c,a7 as h,a8 as w,a9 as B,aa as V,ab as z,f as $,ac as L,o as _,b as I,m,e as a,w as l,B as P,k as U,G as r,a5 as A,a4 as N,q as T}from"./vendor.43efceae.js";/* empty css                        *//* empty css                      *//* empty css                  *//* empty css                     *//* empty css                    */import{e as M,o as S,h as j}from"./base.39e000da.js";import{_ as G,b as R}from"./index.b9411d14.js";import H from"./manageDialog.3e1834ad.js";import"./index.4632b5d2.js";/* empty css                  */const J=q({name:"Manage",components:{manageDialog:H},setup(){let e=E(),t=c({visible:!1,title:"",data:{}}),n=c({data:[],load:!1,query:{page:1,limit:15,total:0,nickname:"",username:""}});const u=async()=>{try{n.load=!0;const{code:d,result:p}=await R(n.query);n.data=p.rows,n.query.total=p.total,n.load=!1}catch{n.load=!1}};return u(),M.on("list-reload",d=>{d==="role"&&u()}),{list:n,form:e,dialogData:t,getList:u,openDialog:S,handleDelete:j}}}),K={class:"page-main"},O={class:"operate-box"},Q={class:"operate-btns"},W=r("\u65B0\u589E"),X={class:"filter-box"},Y=r("\u641C\u7D22"),Z=r("\u91CD\u7F6E"),x=r("\u7F16\u8F91"),ee=r("\u5220\u9664"),ae={class:"pagination"};function te(e,t,n,u,d,p){const s=A,f=N,g=h,y=w,i=B,C=T,b=V,D=z,k=$("manage-dialog"),v=L;return _(),I("div",K,[m("div",O,[m("div",Q,[a(s,{type:"primary",onClick:t[0]||(t[0]=o=>e.openDialog(e.dialogData,"\u65B0\u589E\u7BA1\u7406\u5458"))},{default:l(()=>[W]),_:1})]),a(s,{type:"primary",icon:"Refresh",onClick:t[1]||(t[1]=()=>{e.form.resetFields(),e.getList()})})]),m("div",X,[a(y,{ref:"form",class:"filter-form",model:e.list.query,"label-width":"80px",inline:""},{default:l(()=>[a(g,{label:"\u6635\u79F0",prop:"nickname"},{default:l(()=>[a(f,{modelValue:e.list.query.nickname,"onUpdate:modelValue":t[2]||(t[2]=o=>e.list.query.nickname=o)},null,8,["modelValue"])]),_:1}),a(g,{label:"\u7528\u6237\u540D",prop:"username"},{default:l(()=>[a(f,{modelValue:e.list.query.username,"onUpdate:modelValue":t[3]||(t[3]=o=>e.list.query.username=o)},null,8,["modelValue"])]),_:1}),a(g,null,{default:l(()=>[a(s,{type:"primary",onClick:e.getList},{default:l(()=>[Y]),_:1},8,["onClick"]),a(s,{type:"primary",onClick:t[4]||(t[4]=()=>{e.form.resetFields()})},{default:l(()=>[Z]),_:1})]),_:1})]),_:1},8,["model"])]),P((_(),U(b,{data:e.list.data,border:"",size:"small"},{default:l(()=>[a(i,{prop:"id",label:"ID",width:"60",align:"center"}),a(i,{prop:"username",label:"\u7528\u6237\u540D",align:"center"}),a(i,{prop:"nickname",label:"\u6635\u79F0",align:"center"}),a(i,{prop:"avatar",label:"\u5934\u50CF",align:"center"},{default:l(o=>[a(C,{src:o.row.avatar,style:{width:"40px"}},null,8,["src"])]),_:1}),a(i,{prop:"roleId",label:"\u89D2\u8272",align:"center"}),a(i,{prop:"ctime",label:"\u521B\u5EFA\u65F6\u95F4",align:"center"}),a(i,{label:"\u64CD\u4F5C",align:"center"},{default:l(o=>[a(s,{onClick:F=>e.openDialog(e.dialogData,"\u7F16\u8F91\u7BA1\u7406\u5458",o.row)},{default:l(()=>[x]),_:2},1032,["onClick"]),a(s,{type:"danger",onClick:F=>e.handleDelete([o.row.id],"manage")},{default:l(()=>[ee]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[v,e.list.load]]),m("div",ae,[a(D,{currentPage:e.list.query.page,"onUpdate:currentPage":t[5]||(t[5]=o=>e.list.query.page=o),"page-size":e.list.query.limit,"onUpdate:page-size":t[6]||(t[6]=o=>e.list.query.limit=o),"page-sizes":[15,20,50,100],small:"",layout:"total, sizes, prev, pager, next, jumper",total:e.list.query.total,onSizeChange:e.getList,onCurrentChange:e.getList},null,8,["currentPage","page-size","total","onSizeChange","onCurrentChange"])]),a(k,{"dialog-data":e.dialogData},null,8,["dialog-data"])])}var fe=G(J,[["render",te]]);export{fe as default};
//# sourceMappingURL=manage.b84980e1.js.map
