import{d as _,r as p,an as M,aj as b,al as v,o as f,k as h,w as i,m as C,e as g,l as w,H as y,a8 as V}from"./vendor.5eaa8c15.js";/* empty css                  *//* empty css                *//* empty css                    */import{_ as $,d as B,e as E,g as N,s as S,t as k}from"./index.8a998ac7.js";const A=_({name:"AuthDialog",props:{dialogData:{type:Object,default:()=>({visible:!1,title:"",data:{}})}},setup(e){const a=B();let r=p([]),o=p([]),d=p(e.dialogData);const m=async()=>{const{result:t}=await E(e.dialogData.data.id);o.push(...t)},u=async()=>{const{result:t}=await N({attrs:"id,title,pid,sort"},!0);t.sort((l,D)=>l.sort-D.sort);let s=t.filter(l=>l.pid===0);for(const l of s)a.deepMergeMenu(l,t);r.push(...s)},n=(t,s)=>{o.length=0,o.push(...s.checkedKeys)},c=async()=>{try{const{code:t,message:s,result:l}=await S(e.dialogData.data.id,o);k(s),d.visible=!1}catch(t){k(t.message,"error")}};return M(async()=>{await m(),await u()}),{roleMenu:o,list:r,formData:d,eventCheck:n,handleSubmit:c}}}),j={class:"dialog-footer"},L=y("\u53D6\u6D88"),R=y("\u63D0\u4EA4");function T(e,a,r,o,d,m){const u=b,n=V,c=v;return f(),h(c,{modelValue:e.formData.visible,"onUpdate:modelValue":a[1]||(a[1]=t=>e.formData.visible=t),title:e.formData.title,width:"600px","destroy-on-close":"","close-on-click-modal":!1,top:"0"},{footer:i(()=>[C("span",j,[g(n,{onClick:a[0]||(a[0]=t=>e.formData.visible=!1)},{default:i(()=>[L]),_:1}),g(n,{type:"primary",onClick:e.handleSubmit},{default:i(()=>[R]),_:1},8,["onClick"])])]),default:i(()=>[e.list.length?(f(),h(u,{key:0,"node-key":"id","show-checkbox":"",data:e.list,"highlight-current":"","default-expanded-keys":e.roleMenu,"default-checked-keys":e.roleMenu,props:{children:"children",label:"title"},onCheck:e.eventCheck},null,8,["data","default-expanded-keys","default-checked-keys","onCheck"])):w("",!0)]),_:1},8,["modelValue","title"])}var z=$(A,[["render",T]]);export{z as default};
//# sourceMappingURL=authDialog.716b906e.js.map
