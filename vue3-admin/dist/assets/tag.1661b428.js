import{d as B,a as L,r as D,ag as $,ah as T,ai as q,aj as w,f as F,ae as N,o as n,b as m,m as c,e as p,w as h,C as V,k as f,F as v,H as y,t as k,l as E,a8 as z}from"./vendor.5eaa8c15.js";/* empty css                   *//* empty css                *//* empty css                    */import{r as M,_ as O}from"./index.b5b877e1.js";import U from"./tagDialog.d98c36e0.js";import{e as P,o as j,h as H}from"./base.436c61c3.js";/* empty css                  *//* empty css                        */import"./lodash.5786257d.js";const I=e=>M({method:"get",url:"/api/v1/blog/tag/list",data:e});const C="blog/tag",R=B({name:"Tag",components:{TagDialog:U},setup(){let e=L(""),l=D({visible:!1,title:"",data:{}}),o=D({data:[],load:!1,query:{limit:20,page:1,total:0,attrs:"all"}});const _=i=>{let a=[];for(const t of i){let s=a.find(u=>u.name===t.group);s?s.children?s.children.push(t):s.children=[t]:a.push({name:t.group,children:[t]})}return a},d=async()=>{try{o.load=!0;const{code:i,result:a}=await I(o.query);o.data=_(a),o.load=!1}catch{o.load=!1}};return d(),P.on("list-reload",i=>{i===C&&d()}),{group:e,MODULE:C,list:o,dialogData:l,Edit:$,Delete:T,Plus:q,openDialog:j,handleDelete:H,getList:d}}}),S={class:"page-main"},A={class:"operate-box"},G={class:"operate-btns"},J=y("\u65B0\u589E"),K={class:"custom-tree-node"};function Q(e,l,o,_,d,i){const a=z,t=w,s=F("tag-dialog"),u=N;return n(),m("div",S,[c("div",A,[c("div",G,[p(a,{type:"primary",onClick:l[0]||(l[0]=g=>{e.group="",e.openDialog(e.dialogData,"\u65B0\u589E\u6807\u7B7E")})},{default:h(()=>[J]),_:1})]),p(a,{type:"primary",icon:"Refresh",onClick:l[1]||(l[1]=()=>{e.getList()})})]),V((n(),f(t,{data:e.list.data,"node-key":"id",props:{children:"children",label:"name"},"default-expand-all":"","expand-on-click-node":!1},{default:h(({node:g,data:r})=>[c("span",K,[r.id?(n(),m(v,{key:0},[y(k(r.id)+"_",1)],64)):E("",!0),y(" "+k(g.label)+" ",1),r.group?(n(),m(v,{key:1},[p(a,{type:"primary",icon:e.Edit,size:"small",onClick:b=>e.openDialog(e.dialogData,"\u7F16\u8F91\u6807\u7B7E",r)},null,8,["icon","onClick"]),p(a,{type:"danger",icon:e.Delete,size:"small",onClick:b=>e.handleDelete([r.id],e.MODULE)},null,8,["icon","onClick"])],64)):(n(),f(a,{key:2,type:"primary",icon:e.Plus,size:"small",onClick:()=>{e.group=g.label,e.openDialog(e.dialogData,"\u65B0\u589E\u6807\u7B7E")}},null,8,["icon","onClick"]))])]),_:1},8,["data"])),[[u,e.list.load]]),e.dialogData.visible?(n(),f(s,{key:0,"dialog-data":e.dialogData,module:e.MODULE,group:e.group},null,8,["dialog-data","module","group"])):E("",!0)])}var ie=O(R,[["render",Q],["__scopeId","data-v-0804f441"]]);export{ie as default};
//# sourceMappingURL=tag.1661b428.js.map
