import{r as n,t as a}from"./index.6b964819.js";import{af as f,$ as m}from"./vendor.628a587a.js";function l(e){return{all:e=e||new Map,on:function(s,t){var r=e.get(s);r?r.push(t):e.set(s,[t])},off:function(s,t){var r=e.get(s);r&&(t?r.splice(r.indexOf(t)>>>0,1):e.set(s,[]))},emit:function(s,t){var r=e.get(s);r&&r.slice().map(function(u){u(t)}),(r=e.get("*"))&&r.slice().map(function(u){u(s,t)})}}}const c=l(),o="/api/v1/",E=(e,s,t)=>{e.visible=!0,e.title=s,e.type=t?"update":"create",e.data=t},h=(e,s)=>{f.confirm("\u5220\u9664\u540E\u4E0D\u53EF\u6062\u590D\uFF0C\u786E\u8BA4\u5220\u9664\u64CD\u4F5C\u5417\uFF1F","\u8B66\u544A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning",draggable:!0}).then(async()=>{const{code:t,message:r}=await n({method:"DELETE",url:`${o}${s}`,data:{ids:e}});t===200?(a(r),c.emit("list-reload",s)):a(r,"error")}).catch(t=>{t.code||m({type:"info",message:"\u64CD\u4F5C\u53D6\u6D88"})})},F=async(e,s)=>{var t,r;try{const{code:u,message:i,result:p}=await n({method:(t=e.data)!=null&&t.id?"PUT":"POST",url:(r=e.data)!=null&&r.id?`${o}${s}/${e.data.id}`:`${o}${s}`,data:e.data||e});u===200?(a(i),c.emit("list-reload",s),e.visible=!1):a(i,"error")}catch(u){if(typeof u.message!="string")for(const i of u.message)a(i,"error",2e3);else a(u.message,"error",2e3);throw new Error(u.message||u)}};export{F as a,c as e,h,E as o};
//# sourceMappingURL=base.cbd3d2de.js.map
